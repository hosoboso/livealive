{let e=document,t=e.querySelectorAll('input[type="number"]');t.forEach(e=>{e.addEventListener("input",function(){let t=e.value;t.length>2&&(e.value=t.slice(0,2))})});let l=["0","ザビエール\xd71","オイディプス\xd71, ダイダロス\xd71, ポリディクティス\xd71","クイーンテイル\xd73","ポウンバード\xd71","ルビータイラント\xd71, ケルベロ\xd74","ヌーベルルミエル\xd71","ソウルイーター\xd72, ホラーバルブ\xd72","ファントム\xd71, 亡拳士\xd72","クロノレギオン\xd73","ベアナックル\xd71","ねこまた\xd74","強腕戦車\xd72, メカサタケ９８\xd71","ブラキオペルタ\xd71, エントモパイラム\xd72","ヌーベルルミエル\xd71, バーバリアン\xd76","大顔面\xd73, マスタードラゴン\xd71","イシュタール\xd71","グラシャラボラス\xd72","ツナヨシ\xd71, おイヌ様\xd714","グラングラス\xd72","マスタードラゴン\xd71, ピスタチオ\xd72","ティタンブラッド\xd71","ティタンブラッド\xd71, ピスタチオ\xd714","次元　源左衛門\xd73","ころころムシ\xd71","ホラーシップ\xd71","リンバースキュラ\xd74","バロクレスト\xd72","岩\xd75, マスタードラゴン\xd74, ピスタチオ\xd76","ポワッシー\xd71","岩\xd74, ころころムシ\xd78, ピスタチオ\xd72, マスタードラゴン\xd71","ヘリオスハウント\xd72","ワールダーク\xd71"],_=[0,4,1,1,10,6,4,5,10,6,6,8,14,9,11,10,45,10,10,12,6,0,4,17,4,4,24,0,0,0,0,18,32];function d(){return e.getElementById("num1").checked?1:e.getElementById("num2").checked?2:e.getElementById("num3").checked?3:4}function n(e,t){let l,_,d=Number(e);return 0==t?l=_=0:(l=t-d>0?Math.min((t-d)*16+8,100):Math.floor(t/2)+Math.floor(16/d),_=Math.floor(t/2)+Math.floor(16/d)),`${l} / ${_}`}function r(e){return e=(e=(e=(e=(e=e.replace(/&/g,"&amp;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;")).replace(/"/g,"&quot;")).replace(/'/g,"&#39;")}e.getElementById("radiobtn").addEventListener("change",()=>{e.getElementById("view1").replaceChildren(),e.getElementById("num1"),e.getElementById("num2"),e.getElementById("num3"),e.getElementById("num4");let t=d(),l=["0",e.getElementById("sub-form1").style,e.getElementById("sub-form2").style,e.getElementById("sub-form3").style,e.getElementById("sub-form4").style];for(let _=0;_<5;_++)t<_?l[_].visibility="hidden":l[_].visibility="visible";e.getElementById("view1").insertAdjacentHTML("afterbegin",`<div style="color:#777;border:1px solid gray;padding:0.5em;margin:1em 0.2em;display:inline-block;">上ボタンをクリックで<br>ここに結果が表示されます。</div>`)}),e.getElementById("rankcal").addEventListener("click",()=>{e.getElementById("view1").replaceChildren();let t=window.location.href.split("/").pop(),i=["0",e.getElementById("num1"),e.getElementById("num2"),e.getElementById("num3"),e.getElementById("num4")],m=["0",Number(r(e.getElementById("lev1").value)),Number(r(e.getElementById("lev2").value)),Number(r(e.getElementById("lev3").value)),Number(r(e.getElementById("lev4").value)),],o=d(),c=`※取得経験値の数値は「行動有 / 行動無」で表記`,a="";for(let p=0;p<o;p++)a+=`<th>${p+1}</th>`;let g="",h="<tr><th>ランク</th><th>敵パーティ</th><th>敵パーティ<br>レベル</th></tr>";e.getElementById("expcal").checked&&(h=`<tr><th rowspan="2">ランク</th><th rowspan="2">敵パーティ</th><th rowspan="2">敵パーティ<br>レベル</th><th colspan="${o}">取得経験値</th></tr><tr>${a}</tr>`,g=`${c}`);let y=0;for(let s=1;s<o+1;s++)y+=m[s];let $=[],u=[];for(let b=0;b<4;b++)y>=112?($[b]=29,u[b]=[l[29],l[30],l[31],l[32]]):($[b]=Math.ceil((y+1)/4)+2*b,u[b]=l.slice($[b],$[b]+4));let E="",f=[];for(let B=0;B<4;B++){E=`<table><thead><tr>${h}</tr></thead><tbody>`;for(let I=0;I<4;I++){let v="";if(e.getElementById("expcal").checked)for(let k=1;k<o+1;k++)v+="<td>"+n(m[k],_[$[B]+I])+"</td>";E+=`<tr><td>${$[B]+I}</td><td>${u[B][I]}</td><td>${_[$[B]+I]}</td>${v}</tr>`}f[B]=E}let w=[`<div style="border:1px solid gray;padding:0.5em;margin:1em 0.2em;display:inline-block;">全ての項目に1～99の整数の値を入力してください。</div>`,`<p>パーティのレベル合計値：`,`敵パーティ編成ランク：`,`</tbody></table><p>${g}</p>`],x,L=/^[1-9][0-9]?$/;if((!i[4].checked||L.test(m[1])&&L.test(m[2])&&L.test(m[3])&&L.test(m[4]))&&(!i[3].checked||L.test(m[1])&&L.test(m[2])&&L.test(m[3]))&&(!i[2].checked||L.test(m[1])&&L.test(m[2]))&&(!i[1].checked||L.test(m[1]))){if("dungeon01.html"==t){let A="";if(e.getElementById("expcal").checked)for(let j=1;j<o+1;j++)A+="<td>"+n(m[j],12)+"</td>";x=`${w[1]}${y}<br>鍵のダンジョン ${w[2]}${$[1]}, ${$[1]+1}, ${$[1]+2}, ${$[1]+3}</p>${f[1]}<tr><td>-</td><td>影\xd71</td><td>12</td>${A}</tr>${w[3]}`}else if("dungeon02.html"==t)x=`${w[1]}${y}<br>心のダンジョン ${w[2]}${$[1]}, ${$[1]+1}, ${$[1]+2}, ${$[1]+3}</p>${f[1]}${w[3]}`;else if("dungeon03.html"==t)x=`${w[1]}${y}<br>本能のダンジョン ${w[2]}${$[1]}, ${$[1]+1}, ${$[1]+2}, ${$[1]+3}</p>${f[1]}${w[3]}`;else if("dungeon05.html"==t)x=`${w[1]}${y}<br>力のダンジョン ${w[2]}${$[3]}, ${$[3]+1}, ${$[3]+2}, ${$[3]+3}</p>${f[3]}<p>※入り口エリアまで戻ってから再度奥に進む時はランク${$[2]}, ${$[2]+1}, ${$[2]+2}, ${$[2]+3}</p>${f[2]}${w[3]}`;else if("maou.html"==t)x=`${w[1]}${y}<br>魔王山 ${w[2]}${$[2]}, ${$[2]+1}, ${$[2]+2}, ${$[2]+3}</p>${f[2]}${w[3]}`;else{let q="";e.getElementById("expcal").checked&&(q=`<br>${c}`),x=`<p>${w[1]}${y}${q}</p><h5>ダンジョン以外（ルクレチア城・ルクレチアの森・勇者の山）</h5><p> ${w[2]}${$[0]}, ${$[0]+1}, ${$[0]+2}, ${$[0]+3}</p>${f[0]}</tbody></table><h5>心・本能・鍵のダンジョン</h5><p>${w[2]}${$[1]}, ${$[1]+1}, ${$[1]+2}, ${$[1]+3}${f[1]}</tbody></table></p>※鍵のダンジョンのみ「影\xd71」も出現する</p><h5>力のダンジョン</h5><p>${w[2]}${$[3]}, ${$[3]+1}, ${$[3]+2}, ${$[3]+3}</p>${f[3]}</tbody></table><p>※入り口エリアまで戻ってから再度奥に進む時はランク${$[2]}, ${$[2]+1}, ${$[2]+2}, ${$[2]+3}<br>（下の魔王山エンカウントテーブルと同一）</p><h5>魔王山</h5><p>${w[2]}${$[2]}, ${$[2]+1}, ${$[2]+2}, ${$[2]+3}</p>${f[2]}</tbody></table>`}}else x=w[0];e.getElementById("view1").insertAdjacentHTML("afterbegin",x)})}