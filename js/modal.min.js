// 画像のモーダル表示用JavaScript(min版）
// modal.cssと連携

/*---------------------------------------
別途、矢印切替表示をHTMLに入れること
<script>let arrowOn = true;</script>
矢印切替表示オンならtrue、オフはfalseとする
---------------------------------------*/

document.addEventListener("DOMContentLoaded",()=>{document.querySelector("body").insertAdjacentHTML("afterbegin",'<div class="modal"><span class="modal-close">&#x2716;</span><span class="modal-left">&#x2770;</span><span class="modal-right">&#x2771;</span><img class="modal-img" src="" alt="modal content"></div>');let e=0,s=document.querySelector(".modal"),t=s.querySelector(".modal-img"),l=s.querySelector(".modal-close"),a=s.querySelector(".modal-left"),o=s.querySelector(".modal-right"),c=document.querySelectorAll(".modal-set");document.querySelectorAll(".modal-link").forEach((l,r)=>{l.addEventListener("click",function(l){l.preventDefault(),e=r;let d=this.getAttribute("href");t.src=d,s.classList.add("show"),1!==c.length&&arrowOn&&(0===r?(a.classList.remove("show"),o.classList.add("show")):r===c.length-1?(a.classList.add("show"),o.classList.remove("show")):(a.classList.add("show"),o.classList.add("show")))})}),s.addEventListener("click",function(e){(e.target===l||e.target===s)&&s.classList.remove("show")}),o.addEventListener("click",function(){if(e<c.length-1){e++;let s=c[e].querySelector(".modal-link").getAttribute("href");t.src=s,a.classList.add("show"),e===c.length-1&&o.classList.remove("show")}}),a.addEventListener("click",function(){if(e>0){e--;let s=c[e].querySelector(".modal-link").getAttribute("href");t.src=s,o.classList.add("show"),0===e&&a.classList.remove("show")}})});